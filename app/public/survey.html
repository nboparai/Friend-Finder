<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body>

        <form id="form">
                <div class="form-group">
                  <label for="userName">Name</label>
                  <input type="text" class="form-control" id="userName" placeholder="Enter name">
                  
                </div>
                <div class="form-group">
                  <label for="userImage">Upload Picture</label>
                  <input type="text" class="form-control" id="userImage" placeholder="image">
                </div>
                <div class="form-group">
                        <label for="q1">Example select</label>
                        <select class="form-control" id="q1">
                         <option disabled selected hidden> Select an Option </option>
                          <option value="1">1-strongly disagree</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5-strongly agree</option>
                        </select>
                </div>

                <div class="form-group">
                        <label for="q2">Example select</label>
                        <select class="form-control" id="q2">
                                <option disabled selected hidden> Select an Option </option>
                                <option value="1">1-strongly disagree</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5-strongly agree</option>
                        </select>
                </div>
                
                <div class="form-group">
                            <label for="q3">Example select</label>
                            <select class="form-control" id="q3">
                                    <option disabled selected hidden> Select an Option </option>
                                    <option value="1">1-strongly disagree</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5-strongly agree</option>
                            </select>
                          </div>
                          <div class="form-group">
                                <label for="q4">Example select</label>
                                <select class="form-control" id="q4">
                                        <option disabled selected hidden> Select an Option </option>
                                        <option value="1">1-strongly disagree</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5-strongly agree</option>
                                </select>
                              </div>

                              <div class="form-group">
                                    <label for="q5">Example select</label>
                                    <select class="form-control" id="q5">
                                            <option disabled selected hidden> Select an Option </option>
                                            <option value="1">1-strongly disagree</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5-strongly agree</option>
                                    </select>
                                  </div>

                                  <div class="form-group">
                                        <label for="q6">Example select</label>
                                        <select class="form-control" id="q6">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q7">Example select</label>
                                        <select class="form-control" id="q7">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q8">Example select</label>
                                        <select class="form-control" id="q8">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q9">Example select</label>
                                        <select class="form-control" id="q9">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q10">Example select</label>
                                        <select class="form-control" id="q10">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                <button type="submit" class="btn btn-primary" id ="submit">Find your perefect match!</button>
                
              </form>
             

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 <script>

        
         // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
  // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
  // Our api recognizes the route (/api/)add... and then runs the associated code (found in api-routes.js).
  // In this case the associated code "saves" the data to the friends.js file 
    $("#submit").on("click", function() {
        event.preventDefault();
        var newMember = {
            name: $("#userName").val().trim(),
            image: $("#userImage").val().trim(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()

            ]
        }
        $(form).hide(1000);
        console.log(newMember);
        

         $.post("/api/friends", newMember, function(data) {
          console.log("survey.html", data);
          alert("Adding new member...");
          
          
        });
        findMatch();
    });

    function findMatch() {
        $.ajax({ url: "api/friends", method: "GET"})
        .then(function(memberData) {
                var k = memberData.length;
                console.log(`total members ${k}`);
                console.log(`old members ${memberData}`);
                var resultData = [];
                for (let i = 0; i < memberData.length-1; i++) {
                        var total = 0;
                        for (let j = 0; j < 10; j++) {
                                // console.log(`memebrs scores are ${memberData[i].scores[j]}`)
                                total = total + Math.abs(memberData[i].scores[j] - memberData[k-1].scores[j])
                        }
                        resultData.push(total);

                        console.log(`score array is ${resultData}`);
                        
                

                }
                        
                console.log(`score array is ${resultData}`);
                console.log(Math.max(resultData));  


        });

    }
 </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    
</head>
<body>

        <form id="form">
                <div class="form-group">
                  <label for="userName">Name</label>
                  <input type="text" class="form-control" id="userName" placeholder="Enter name">
                  
                </div>
                <div class="form-group">
                  <label for="userImage">Upload Picture</label>
                  <input type="text" class="form-control" id="userImage" placeholder="image">
                </div>
                <div class="form-group">
                        <label for="q1">I always liek to be center of attention</label>
                        <select class="form-control" id="q1">
                         <option disabled selected hidden> Select an Option </option>
                          <option value="1">1-strongly disagree</option>
                          <option value="2">2</option>
                          <option value="3">3</option>
                          <option value="4">4</option>
                          <option value="5">5-strongly agree</option>
                        </select>
                </div>

                <div class="form-group">
                        <label for="q2">I value peoples feelings more than anything else</label>
                        <select class="form-control" id="q2">
                                <option disabled selected hidden>  </option>
                                <option value="1">1-strongly disagree</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5-strongly agree</option>
                        </select>
                </div>
                
                <div class="form-group">
                            <label for="q3">If I am angry, I like to left alone</label>
                            <select class="form-control" id="q3">
                                    <option disabled selected hidden> Select an Option </option>
                                    <option value="1">1-strongly disagree</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5-strongly agree</option>
                            </select>
                          </div>
                          <div class="form-group">
                                <label for="q4">I like to state things how thye are</label>
                                <select class="form-control" id="q4">
                                        <option disabled selected hidden> Select an Option </option>
                                        <option value="1">1-strongly disagree</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5-strongly agree</option>
                                </select>
                              </div>

                              <div class="form-group">
                                    <label for="q5">I like to go to movies</label>
                                    <select class="form-control" id="q5">
                                            <option disabled selected hidden> Select an Option </option>
                                            <option value="1">1-strongly disagree</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5-strongly agree</option>
                                    </select>
                                  </div>

                                  <div class="form-group">
                                        <label for="q6">I listen to music all the time</label>
                                        <select class="form-control" id="q6">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q7">I laways like to have the newest things</label>
                                        <select class="form-control" id="q7">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q8">i have mnay friends</label>
                                        <select class="form-control" id="q8">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q9">I like animlas</label>
                                        <select class="form-control" id="q9">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                                      <div class="form-group">
                                        <label for="q10">I am always happy</label>
                                        <select class="form-control" id="q10">
                                                <option disabled selected hidden> Select an Option </option>
                                                <option value="1">1-strongly disagree</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5-strongly agree</option>
                                        </select>
                                      </div>
                <button type="submit" class="btn btn-primary" id ="submit">Find your perefect match!</button>
                <p id = "msg"> </p>
              </form>
             
        <footer class="footer">
                <a target="_blank" href="/api/friends">API Friends List</a>
        </footer>
        <div id="results-modal" class="modal fade in" role="dialog" style="display: none;">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button class="close" data-dismiss="modal">&times;</button>
                            <h2 class="modal-title"><strong>Best Match</strong></h2>
                        </div>
                        <div class="modal-body">
                            <h2 id="match-name"></h2>
                            <img id="match-img" src="" alt="">
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>
                </div>
            </div>

        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
 <script>

        function validateForm() {
                var valid = true;
                $(".form-control").each(function() {
                        if (!$(this).val()) {
                                valid = false;

                        }
                        
                })
                return valid;
        }
         // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
  // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
  // Our api recognizes the route (/api/)add... and then runs the associated code (found in api-routes.js).
  // In this case the associated code "saves" the data to the friends.js file 
    $("#submit").on("click", function() {
        event.preventDefault();
        $("#msg").text("");
        if (validateForm()) {

        
        var newMember = {
            name: $("#userName").val().trim(),
            photo: $("#userImage").val().trim(),
            scores: [
                $("#q1").val(),
                $("#q2").val(),
                $("#q3").val(),
                $("#q4").val(),
                $("#q5").val(),
                $("#q6").val(),
                $("#q7").val(),
                $("#q8").val(),
                $("#q9").val(),
                $("#q10").val()

            ]
        }
        
        console.log(newMember);
        

         $.post("/api/friends", newMember, function(data) {
          console.log("survey.html", data);
          $("#match-name").text(data.name);
          $("#match-img").attr("src", data.photo);

         $("#results-modal").modal("toggle");
         $("#results-modal").show();
          
          
        });

        $("#userName").val("");
        $("#userImage").val("");
        $("#q1").val("");
        $("#q2").val("");
        $("#q3").val("");
        $("#q4").val("");
        $("#q5").val("");
        $("#q6").val("");
        $("#q7").val("");
        $("#q8").val("");
        $("#q9").val("");
        $("#q10").val("");
        }

        else {
               $("#msg").text("Please complete all fields");
        }
    });


   

    
 </script>
</body>
</html>